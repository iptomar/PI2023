<html>
  <head>
    <style>
      div{height: 2000;}
      button{border: none; display: inline-block; font-size: 19px; border-radius: 4px; background-color: #8093e0; color:#ffffff;}
    </style>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

      google.charts.load('current', {packages: ['corechart', 'bar']});

      var chartData;

      xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          chartData = JSON.parse(this.responseText);
          // Set a callback to run when the Google Visualization API is loaded.
          google.charts.setOnLoadCallback(function(){ drawBarColors(chartData) });;
        }
      };
      xmlhttp.open("GET", "getDaysSend.php", true);
      xmlhttp.send();

      function drawBarColors(chartData) {
            var data = google.visualization.arrayToDataTable(chartData.data);

            //variaveir referentes aos elementos do html
            var button1 = document.getElementById('change-chart1');
            var button2 = document.getElementById('change-chart2');
            var button3 = document.getElementById('change-chart3');
            var button4 = document.getElementById('change-chart4');
            var chartDiv = document.getElementById('chart_div');

            //caracteristicas do grafico de envios por dia
            var daysOptions = {
              title: chartData.title,
              chartArea: {width: '50%'},
              colors: ['#8093e0'],
              hAxis: {
                title: 'Sendings',
                minValue: 0
              },
              vAxis: {
                title: 'Days'
              }
            };

            //caracteristicas do grafico de envios por semana
            var weeksOptions = {
              title: 'Volume of Sendings per Week',
              chartArea: {width: '50%'},
              colors: ['#8093e0'],
              hAxis: {
                title: 'Sendings',
                minValue: 0
              },
              vAxis: {
                title: 'Weeks'
              }
            };

            //caracteristicas do grafico de envios por mês
            var monthsOptions = {
              title: 'Volume of Sendings per Month',
              chartArea: {width: '50%'},
              colors: ['#8093e0'],
              hAxis: {
                title: 'Sendings',
                minValue: 0
              },
              vAxis: {
                title: 'Months'
              }
            };

            //caracteristicas do grafico da moda de envios por hora
            var hoursOptions = {
              title: 'Mode Sendings per Hour',
              chartArea: {width: '50%'},
              colors: ['#8093e0'],
              hAxis: {
                title: 'Sendings',
                minValue: 0
              },
              vAxis: {
                title: 'Hours'
              }
            };

            function loadDataAndDrawChart(url, options, button) {
              var xmlhttp = new XMLHttpRequest();
              xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                  var newData = JSON.parse(this.responseText);
                  data = google.visualization.arrayToDataTable(newData.data);
                  var chart = new google.visualization.BarChart(chartDiv);
                  chart.draw(data, google.charts.Bar.convertOptions(options));
                  button.disabled = false;
                }
              };
              xmlhttp.open("GET", url, true);
              xmlhttp.send();
            }

            //ao clica neste butão, ele irá mostrar o grafico de envios por dia
            function drawDaysChart() {
              button1.disabled = true;
              loadDataAndDrawChart("getDaysSend.php", daysOptions, button1);
              button2.onclick = drawWeeksChart;
              button3.onclick = drawMonthsChart;
              button4.onclick = drawHoursChart;
              chartDiv.style.height = '2000px';
            }

            //ao clica neste butão, ele irá mostrar o grafico de envios por semana
            function drawWeeksChart() {
              button2.disabled = true;
              loadDataAndDrawChart("getWeeksSend.php", weeksOptions, button2);
              button1.onclick = drawDaysChart;
              button3.onclick = drawMonthsChart;
              button4.onclick = drawHoursChart;
              chartDiv.style.height = '1000px';
            }

            //ao clica neste butão, ele irá mostrar o grafico de envios por mês
            function drawMonthsChart() {
              button3.disabled = true;
              loadDataAndDrawChart("getMonthsSend.php", monthsOptions, button3);
              button1.onclick = drawDaysChart;
              button2.onclick = drawWeeksChart;
              button4.onclick = drawHoursChart;
              chartDiv.style.height = '500px';
            }

            //ao clica neste butão, ele irá mostrar o grafico da moda de envios por hora
            function drawHoursChart() {
              button4.disabled = true;
              loadDataAndDrawChart("getHoursSend.php", hoursOptions, button4);
              button1.onclick = drawDaysChart;
              button2.onclick = drawWeeksChart;
              button3.onclick = drawMonthsChart;
              chartDiv.style.height = '1000px';
            }

            //inicializa o grafico de envios por dia
            drawDaysChart();
          }
    </script>
  </head>

  <body>
    <button id="change-chart1">Change to Days</button>
    <button id="change-chart2">Change to Weeks</button>
    <button id="change-chart3">Change to Months</button>
    <button id="change-chart4">Change to Hours</button>
    <br><br>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html>